import{a1 as V,r,m as B,v as z,a2 as E,c as N,b as o,w as t,h as i,a3 as y,a as c,o as $,d as b,t as j,a4 as A}from"./C895ZlrV.js";import{_ as C,j as I}from"./BTyBWObn.js";import{a as O,_ as Y,b as q}from"./DFfg79p6.js";import{d as G,_ as K,a as M}from"./qfkM5leR.js";import{B as m}from"./D0guDg9n.js";import"./Ckv93PyJ.js";const R=c("div",{class:"text-2xl font-bold"},"Ssilkalar",-1),D=["src"],F={class:"flex items-center justify-between"},J=c("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Ssilkani Tahrirlash ",-1),ee={__name:"index",setup(L){V(),r([]);let l=B([{youtubeUrl:"",name:"YouTube"}]),_=r(!1),u=r(!0);r(""),r(null);let a=r(!1);z(async()=>{try{const e=await $fetch(m+"/urls",{method:"GET"});l[0].youtubeUrl=e.data.youtubeUrl,u.value=!1}catch(e){return e.response&&e.response.status===401&&(localStorage.removeItem("token"),E("/exit")),console.log(e)}});const f=[{key:"name",label:"Nomi"},{key:"youtubeUrl",label:"Youtube ssilkasi"},{key:"actions",label:"Action"}],h=e=>[[{label:"Tahrirlash",icon:"i-heroicons-pencil-square-20-solid",click:()=>g()}]],g=e=>{a.value=!0},v=async()=>{u.value=!0;try{await $fetch(m+"/urls",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({youtubeUrl:l[0].youtubeUrl})});let e=await $fetch(m+"/urls",{method:"GET"});l[0].youtubeUrl=e.data.youtubeUrl,a.value=!1}catch(e){return console.log(e)}u.value=!1};return G({escape:{usingInput:!0,whenever:[_],handler:()=>{_.value=!1}}}),(e,n)=>{const d=A,U=I,w=C,x=O,p=Y,k=q,T=M,S=K;return $(),N("div",null,[R,o(w,{loading:i(u),"loading-state":{icon:"i-heroicons-arrow-path-20-solid",label:"Yuklanmoqda..."},progress:{color:"primary",animation:"carousel"},columns:f,rows:i(l),"empty-state":{icon:"i-heroicons-circle-stack-20-solid",label:"Bannerlar Mavjud Emas"}},{"youtubeUrl-data":t(({row:s})=>[b(j()+" ",1),c("iframe",{width:"560",height:"315",src:`https://www.youtube.com/embed/joARPQJK8vk?si=${s.youtubeUrl}`,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""},null,8,D)]),"actions-data":t(({row:s})=>[o(U,{items:h(s)},{default:t(()=>[o(d,{color:"gray",variant:"ghost",icon:"i-heroicons-ellipsis-horizontal-20-solid"})]),_:2},1032,["items"])]),_:1},8,["loading","loading-state","rows"]),o(S,{modelValue:i(a),"onUpdate:modelValue":n[2]||(n[2]=s=>y(a)?a.value=s:a=s),"prevent-close":""},{default:t(()=>[o(T,{ui:{ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:t(()=>[c("div",F,[J,o(d,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:n[0]||(n[0]=s=>y(a)?a.value=!1:a=!1)})])]),default:t(()=>[o(k,{onSubmit:v},{default:t(()=>[o(p,{class:"my-[2%]",label:"Kategoriya Uchun Nom Kiriting",name:"photo",size:"lg"},{default:t(()=>[o(x,{type:"text",size:"lg",modelValue:i(l)[0].youtubeUrl,"onUpdate:modelValue":n[1]||(n[1]=s=>i(l)[0].youtubeUrl=s)},null,8,["modelValue"])]),_:1}),o(p,{class:"my-[2%]",name:"submit",size:"lg"},{default:t(()=>[o(d,{loading:i(u),type:"submit",color:"primary",size:"lg",block:""},{default:t(()=>[b("Tasdiqlash")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{ee as default};

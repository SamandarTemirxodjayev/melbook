import{z as F,a8 as oe,aa as ue,r as C,g as d,Q as de,_ as U,D as K,G as w,l as D,K as H,L as J,q,o as m,c as g,a as T,U as y,W as p,aq as E,V as z,F as O,d as j,t as A,X as B,ar as ce,E as fe,I as Q,N as me,M as ge,v as X,O as ve,P as N,b as Z,ag as ye,A as be,am as he,ax as pe}from"./6MvdGIUj.js";import{c as Ie}from"./DXAgjXKp.js";const $e={wrapper:"",inner:"",label:{wrapper:"flex content-center items-center justify-between",base:"block font-medium text-gray-700 dark:text-gray-200",required:"after:content-['*'] after:ms-0.5 after:text-red-500 dark:after:text-red-400"},size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},container:"mt-1 relative",description:"text-gray-500 dark:text-gray-400",hint:"text-gray-500 dark:text-gray-400",help:"mt-2 text-gray-500 dark:text-gray-400",error:"mt-2 text-red-500 dark:text-red-400",default:{size:"sm"}},Se="data-n-ids",ze="-";function G(e){var s,i,o,c,v,b;if(typeof e!="string")throw new TypeError("[nuxt] [useId] key must be a string.");e=`n${e.slice(1)}`;const t=oe(),l=ue();if(!l)throw new TypeError("[nuxt] `useId` must be called within a component setup function.");t._id||(t._id=0),l._nuxtIdIndex||(l._nuxtIdIndex={}),(s=l._nuxtIdIndex)[e]||(s[e]=0);const a=e+ze+l._nuxtIdIndex[e]++;if(t.payload.serverRendered&&t.isHydrating&&!F(Ie,!1)){const n=((i=l.vnode.el)==null?void 0:i.nodeType)===8&&((c=(o=l.vnode.el)==null?void 0:o.nextElementSibling)!=null&&c.getAttribute)?(v=l.vnode.el)==null?void 0:v.nextElementSibling:l.vnode.el,r=JSON.parse(((b=n==null?void 0:n.getAttribute)==null?void 0:b.call(n,Se))||"{}");if(r[a])return r[a]}return e+"_"+t._id++}const we=(e,t)=>{const l=F("form-events",void 0),a=F("form-group",void 0),s=F("form-inputs",void 0);a&&(e!=null&&e.id&&(a.inputId.value=e==null?void 0:e.id),s&&(s.value[a.name.value]=a.inputId.value));const i=C(!1);function o(n,r){l&&l.emit({type:n,path:r})}function c(){o("blur",a==null?void 0:a.name.value),i.value=!0}function v(){o("change",a==null?void 0:a.name.value)}const b=de(()=>{(i.value||a!=null&&a.eagerValidation.value)&&o("input",a==null?void 0:a.name.value)},300);return{inputId:d(()=>(e==null?void 0:e.id)??(a==null?void 0:a.inputId.value)),name:d(()=>(e==null?void 0:e.name)??(a==null?void 0:a.name.value)),size:d(()=>{var r;const n=t.size[a==null?void 0:a.size.value]?a==null?void 0:a.size.value:null;return(e==null?void 0:e.size)??n??((r=t==null?void 0:t.default)==null?void 0:r.size)}),color:d(()=>{var n;return(n=a==null?void 0:a.error)!=null&&n.value?"red":e==null?void 0:e.color}),emitFormBlur:c,emitFormInput:b,emitFormChange:v}},R=K(w.ui.strategy,w.ui.formGroup,$e),Ee=D({inheritAttrs:!1,props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(R.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},eagerValidation:{type:Boolean,default:!1}},setup(e){const{ui:t,attrs:l}=H("formGroup",J(e,"ui"),R,J(e,"class")),a=F("form-errors",null),s=d(()=>{var c,v;return e.error&&typeof e.error=="string"||typeof e.error=="boolean"?e.error:(v=(c=a==null?void 0:a.value)==null?void 0:c.find(b=>b.path===e.name))==null?void 0:v.message}),i=d(()=>t.value.size[e.size??R.default.size]),o=C(G("$xpcWqizZhm"));return q("form-group",{error:s,inputId:o,name:d(()=>e.name),size:d(()=>e.size),eagerValidation:d(()=>e.eagerValidation)}),{ui:t,attrs:l,inputId:o,size:i,error:s}}}),Be=["for"];function Ce(e,t,l,a,s,i){return m(),g("div",z({class:e.ui.wrapper},e.attrs),[T("div",{class:y(e.ui.inner)},[e.label||e.$slots.label?(m(),g("div",{key:0,class:y([e.ui.label.wrapper,e.size])},[T("label",{for:e.inputId,class:y([e.ui.label.base,e.required?e.ui.label.required:""])},[e.$slots.label?p(e.$slots,"label",E(z({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(m(),g(O,{key:1},[j(A(e.label),1)],64))],10,Be),e.hint||e.$slots.hint?(m(),g("span",{key:0,class:y([e.ui.hint])},[e.$slots.hint?p(e.$slots,"hint",E(z({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(m(),g(O,{key:1},[j(A(e.hint),1)],64))],2)):B("",!0)],2)):B("",!0),e.description||e.$slots.description?(m(),g("p",{key:1,class:y([e.ui.description,e.size])},[e.$slots.description?p(e.$slots,"description",E(z({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(m(),g(O,{key:1},[j(A(e.description),1)],64))],2)):B("",!0)],2),T("div",{class:y([e.label?e.ui.container:""])},[p(e.$slots,"default",E(ce({error:e.error}))),typeof e.error=="string"&&e.error||e.$slots.error?(m(),g("p",{key:0,class:y([e.ui.error,e.size])},[e.$slots.error?p(e.$slots,"error",E(z({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(m(),g(O,{key:1},[j(A(e.error),1)],64))],2)):e.help||e.$slots.help?(m(),g("p",{key:1,class:y([e.ui.help,e.size])},[e.$slots.help?p(e.$slots,"help",E(z({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(m(),g(O,{key:1},[j(A(e.help),1)],64))],2)):B("",!0)],2)],16)}const Ze=U(Ee,[["render",Ce]]),S=K(w.ui.strategy,w.ui.input,fe),ke=D({components:{UIcon:Q},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>S.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(S.size).includes(e)}},color:{type:String,default:()=>S.default.color,validator(e){return[...w.ui.colors,...Object.keys(S.color)].includes(e)}},variant:{type:String,default:()=>S.default.variant,validator(e){return[...Object.keys(S.variant),...Object.values(S.color).flatMap(t=>Object.keys(t))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur"],setup(e,{emit:t,slots:l}){const{ui:a,attrs:s}=H("input",J(e,"ui"),S,J(e,"class")),{size:i,rounded:o}=me({ui:a,props:e}),{emitFormBlur:c,emitFormInput:v,size:b,color:n,inputId:r,name:h}=we(e,S),f=d(()=>i.value||b.value),I=C(ge({},e.modelModifiers,{trim:!1,lazy:!1,number:!1})),$=C(null),P=()=>{var u;e.autofocus&&((u=$.value)==null||u.focus())},W=u=>{I.value.trim&&(u=u.trim()),(I.value.number||e.type==="number")&&(u=ye(u)),t("update:modelValue",u),v()},_=u=>{I.value.lazy||W(u.target.value)},x=u=>{const k=u.target.value;I.value.lazy&&W(k),I.value.trim&&(u.target.value=k.trim())},ee=u=>{c(),t("blur",u)};X(()=>{setTimeout(()=>{P()},e.autofocusDelay)});const ae=d(()=>{var k,L;const u=((L=(k=a.value.color)==null?void 0:k[n.value])==null?void 0:L[e.variant])||a.value.variant[e.variant];return ve(N(a.value.base,a.value.form,o.value,a.value.placeholder,e.type==="file"&&[a.value.file.base,a.value.file.padding[f.value]],a.value.size[f.value],e.padded?a.value.padding[f.value]:"p-0",u==null?void 0:u.replaceAll("{color}",n.value),(V.value||l.leading)&&a.value.leading.padding[f.value],(Y.value||l.trailing)&&a.value.trailing.padding[f.value]),e.inputClass)}),V=d(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),Y=d(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),ne=d(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),te=d(()=>e.loading&&!V.value?e.loadingIcon:e.trailingIcon||e.icon),le=d(()=>N(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[f.value])),ie=d(()=>N(a.value.icon.base,n.value&&w.ui.colors.includes(n.value)&&a.value.icon.color.replaceAll("{color}",n.value),a.value.icon.size[f.value],e.loading&&a.value.icon.loading)),re=d(()=>N(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[f.value])),se=d(()=>N(a.value.icon.base,n.value&&w.ui.colors.includes(n.value)&&a.value.icon.color.replaceAll("{color}",n.value),a.value.icon.size[f.value],e.loading&&!V.value&&a.value.icon.loading));return{ui:a,attrs:s,name:h,inputId:r,input:$,isLeading:V,isTrailing:Y,inputClass:ae,leadingIconName:ne,leadingIconClass:ie,leadingWrapperIconClass:le,trailingIconName:te,trailingIconClass:se,trailingWrapperIconClass:re,onInput:_,onChange:x,onBlur:ee}}}),Oe=["id","name","value","type","required","placeholder","disabled"];function je(e,t,l,a,s,i){const o=Q;return m(),g("div",{class:y(e.ui.wrapper)},[T("input",z({id:e.inputId,ref:"input",name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass},e.attrs,{onInput:t[0]||(t[0]=(...c)=>e.onInput&&e.onInput(...c)),onBlur:t[1]||(t[1]=(...c)=>e.onBlur&&e.onBlur(...c)),onChange:t[2]||(t[2]=(...c)=>e.onChange&&e.onChange(...c))}),null,16,Oe),p(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(m(),g("span",{key:0,class:y(e.leadingWrapperIconClass)},[p(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[Z(o,{name:e.leadingIconName,class:y(e.leadingIconClass)},null,8,["name","class"])])],2)):B("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(m(),g("span",{key:1,class:y(e.trailingWrapperIconClass)},[p(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[Z(o,{name:e.trailingIconName,class:y(e.trailingIconClass)},null,8,["name","class"])])],2)):B("",!0)],2)}const Ke=U(ke,[["render",je]]);class M extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,M.prototype)}}const Ae=D({props:{schema:{type:Object,default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:t,emit:l}){const a=G("$psJ7jvGyFY"),s=pe(`form-${a}`);X(()=>{s.on(async n=>{var r;n.type!=="submit"&&((r=e.validateOn)!=null&&r.includes(n.type))&&await v(n.path,{silent:!0})})}),be(()=>{s.reset()});const i=C([]);q("form-errors",i),q("form-events",s);const o=C({});q("form-inputs",o);async function c(){let n=await e.validate(e.state);if(e.schema)if(qe(e.schema))n=n.concat(await Te(e.state,e.schema));else if(Ne(e.schema))n=n.concat(await Ve(e.state,e.schema));else if(Je(e.schema))n=n.concat(await Re(e.state,e.schema));else if(Ue(e.schema))n=n.concat(await De(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return n}async function v(n,r={silent:!1}){let h=n;if(n&&!Array.isArray(n)&&(h=[n]),h){const f=i.value.filter($=>!h.includes($.path)),I=(await c()).filter($=>h.includes($.path));i.value=f.concat(I)}else i.value=await c();if(i.value.length>0){if(r.silent)return!1;throw new M(`Form validation failed: ${JSON.stringify(i.value,null,2)}`)}return e.state}async function b(n){var h;const r=n;try{(h=e.validateOn)!=null&&h.includes("submit")&&await v();const f={...r,data:e.state};l("submit",f)}catch(f){if(!(f instanceof M))throw f;const I={...r,errors:i.value.map($=>({...$,id:o.value[$.path]}))};l("error",I)}}return t({validate:v,errors:i,setErrors(n,r){i.value=n,r?i.value=i.value.filter(h=>h.path!==r).concat(n):i.value=n},async submit(){await b(new Event("submit"))},getErrors(n){return n?i.value.filter(r=>r.path===n):i.value},clear(n){n?i.value=i.value.filter(r=>r.path!==n):i.value=[]}}),{onSubmit:b}}});function Ne(e){return e.validate&&e.__isYupSchema__}function Fe(e){return e.inner!==void 0}async function Ve(e,t){try{return await t.validate(e,{abortEarly:!1}),[]}catch(l){if(Fe(l))return l.inner.map(a=>({path:a.path??"",message:a.message}));throw l}}function qe(e){return e.parse!==void 0}async function Te(e,t){const l=await t.safeParseAsync(e);return l.success===!1?l.error.issues.map(a=>({path:a.path.join("."),message:a.message})):[]}function Je(e){return e.validateAsync!==void 0&&e.id!==void 0}function Me(e){return e.isJoi===!0}async function Re(e,t){try{return await t.validateAsync(e,{abortEarly:!1}),[]}catch(l){if(Me(l))return l.details.map(a=>({path:a.path.join("."),message:a.message}));throw l}}function Ue(e){return e._parse!==void 0}async function De(e,t){const l=await t._parse(e);return l.issues?l.issues.map(a=>{var s;return{path:((s=a.path)==null?void 0:s.map(i=>i.key).join("."))||"",message:a.message}}):[]}function We(e,t,l,a,s,i){return m(),g("form",{onSubmit:t[0]||(t[0]=he((...o)=>e.onSubmit&&e.onSubmit(...o),["prevent"]))},[p(e.$slots,"default")],32)}const He=U(Ae,[["render",We]]),Qe="http://localhost:3000/api",Xe="https://cdn.mel-book.uz/api";export{Qe as B,Xe as C,Ze as _,G as a,Ke as b,He as c,we as u};

import{_ as Q,D as X,G as A,l as Z,a4 as E,K as H,L as q,g as z,o as m,c as T,W as j,T as F,V as B,X as N,F as J,Z as _,ar as x,a1 as ee,r as f,v as te,a2 as D,b as P,w as C,h as b,a as $,a3 as R,d as W,t as Y}from"./DSqCSHXE.js";import{_ as ae,j as oe}from"./n46y_Jcv.js";import{B as M}from"./DhU_yjrD.js";import{d as K}from"./yughPfh0.js";import"./2VMr5hfZ.js";const se={wrapper:"flex items-center -space-x-px",base:"",rounded:"first:rounded-s-md last:rounded-e-md",default:{size:"sm",activeButton:{color:"primary"},inactiveButton:{color:"white"},firstButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-double-left-20-solid"},lastButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-double-right-20-solid"},prevButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-right-20-solid"}}},p=X(A.ui.strategy,A.ui.pagination,se),ne=X(A.ui.strategy,A.ui.button,x),le=Z({components:{UButton:E},inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},pageCount:{type:Number,default:10},total:{type:Number,required:!0},max:{type:Number,default:7,validate(e){return e>=5&&e<Number.MAX_VALUE}},disabled:{type:Boolean,default:!1},size:{type:String,default:()=>p.default.size,validator(e){return Object.keys(ne.size).includes(e)}},activeButton:{type:Object,default:()=>p.default.activeButton},inactiveButton:{type:Object,default:()=>p.default.inactiveButton},showFirst:{type:Boolean,default:!1},showLast:{type:Boolean,default:!1},firstButton:{type:Object,default:()=>p.default.firstButton},lastButton:{type:Object,default:()=>p.default.lastButton},prevButton:{type:Object,default:()=>p.default.prevButton},nextButton:{type:Object,default:()=>p.default.nextButton},divider:{type:String,default:"â€¦"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:w}){const{ui:h,attrs:y}=H("pagination",q(e,"ui"),p,q(e,"class")),s=z({get(){return e.modelValue},set(o){w("update:modelValue",o)}}),i=z(()=>Array.from({length:Math.ceil(e.total/e.pageCount)},(o,u)=>u+1)),d=z(()=>{const o=i.value.length,u=s.value,O=Math.max(e.max,5),a=Math.floor((Math.min(O,o)-5)/2),S=u-a,U=u+a,G=S-1>1,I=U+1<o,t=[];if(o<=O){for(let c=1;c<=o;c++)t.push(c);return t}if(t.push(1),G&&t.push(e.divider),!I){const c=u+a+2-o;for(let g=u-a-c;g<=u-a-1;g++)t.push(g)}for(let c=Math.max(2,S);c<=Math.min(o,U);c++)t.push(c);if(!G){const c=1-(u-a-2);for(let g=u+a+1;g<=u+a+c;g++)t.push(g)}return I&&t.push(e.divider),U<o&&t.push(o),t.length>=3&&t[1]===e.divider&&t[2]===3&&(t[1]=2),t.length>=3&&t[t.length-2]===e.divider&&t[t.length-1]===t.length&&(t[t.length-2]=t.length-1),t}),r=z(()=>s.value>1),v=z(()=>s.value<i.value.length);function L(){r.value&&(s.value=1)}function V(){v.value&&(s.value=i.value.length)}function n(o){typeof o!="string"&&(s.value=o)}function l(){r.value&&s.value--}function k(){v.value&&s.value++}return{ui:h,attrs:y,currentPage:s,pages:i,displayedPages:d,canGoLastOrNext:v,canGoFirstOrPrev:r,onClickPrev:l,onClickNext:k,onClickPage:n,onClickFirst:L,onClickLast:V}}});function ie(e,w,h,y,s,i){const d=E;return m(),T("div",B({class:e.ui.wrapper},e.attrs),[j(e.$slots,"first",{onClick:e.onClickFirst},()=>[e.firstButton&&e.showFirst?(m(),F(d,B({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.firstButton||{},...e.firstButton},{ui:{rounded:""},"aria-label":"First",onClick:e.onClickFirst}),null,16,["size","disabled","class","onClick"])):N("",!0)]),j(e.$slots,"prev",{onClick:e.onClickPrev},()=>[e.prevButton?(m(),F(d,B({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.prevButton||{},...e.prevButton},{ui:{rounded:""},"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["size","disabled","class","onClick"])):N("",!0)]),(m(!0),T(J,null,_(e.displayedPages,(r,v)=>(m(),F(d,B({key:`${r}-${v}`,size:e.size,disabled:e.disabled,label:`${r}`},r===e.currentPage?{...e.ui.default.activeButton||{},...e.activeButton}:{...e.ui.default.inactiveButton||{},...e.inactiveButton},{class:[{"pointer-events-none":typeof r=="string","z-[1]":r===e.currentPage},e.ui.base,e.ui.rounded],ui:{rounded:""},onClick:()=>e.onClickPage(r)}),null,16,["size","disabled","label","class","onClick"]))),128)),j(e.$slots,"next",{onClick:e.onClickNext},()=>[e.nextButton?(m(),F(d,B({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.nextButton||{},...e.nextButton},{ui:{rounded:""},"aria-label":"Next",onClick:e.onClickNext}),null,16,["size","disabled","class","onClick"])):N("",!0)]),j(e.$slots,"last",{onClick:e.onClickLast},()=>[e.lastButton&&e.showLast?(m(),F(d,B({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.lastButton||{},...e.lastButton},{ui:{rounded:""},"aria-label":"Last",onClick:e.onClickLast}),null,16,["size","disabled","class","onClick"])):N("",!0)])],16)}const re=Q(le,[["render",ie]]),ue=$("div",{class:"text-2xl font-bold"},"Foydalanuvchilar",-1),de=["src"],ce={class:"flex flex-col items-center justify-center py-6 gap-3"},fe=$("span",{class:"italic text-sm"},"Ma'lumot Mavjud Emas",-1),pe={class:"flex justify-end px-3 py-3.5 border-t border-gray-200 dark:border-gray-700"},ye={__name:"index",setup(e){const w=ee();let h=f([]),y=f(!1),s=f(!0);f(""),f(null),f(!1);let i=f(1),d=f(20);te(async()=>{try{const n=await $fetch(M+"/user/get-all",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});h.value=n.data,s.value=!1}catch(n){n.response&&n.response.status===401&&(localStorage.removeItem("token"),D("/exit"))}});const r=[{key:"username",label:"Username"},{key:"name",label:"Ismi"},{key:"surname",label:"Familiyasi"},{key:"phone_number",label:"Telefon Raqami"},{key:"createdAt",label:"Yaratilgan vaqti"},{key:"updatedAt",label:"Yangilangan vaqti"},{key:"actions",label:"Action"}],v=n=>[[{label:"O'chirish",icon:"i-heroicons-trash-20-solid",click:()=>L(n._id)}]],L=async n=>{s.value=!0;try{const l=await $fetch(M+"/user/"+n,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(l.status===200){w.add({title:l.message});const k=await $fetch(M+"/user/get-all",{method:"GET"});h.value=k.data}else w.add({title:l.message})}catch(l){l.response&&l.response.status===401&&(localStorage.removeItem("token"),D("/exit"))}s.value=!1},V=z(()=>h.value.slice((i.value-1)*d.value,i.value*d.value));return(n,l)=>{const k=E,o=oe,u=ae,O=re;return m(),T("div",null,[ue,P(u,{loading:b(s),"loading-state":{icon:"i-heroicons-arrow-path-20-solid",label:"Yuklanmoqda..."},progress:{color:"primary",animation:"carousel"},columns:r,rows:b(V),"empty-state":{icon:"i-heroicons-circle-stack-20-solid",label:"Bannerlar Mavjud Emas"}},{"photo_url-data":C(({row:a})=>[$("img",{src:a.photo_url,alt:""},null,8,de)]),"createdAt-data":C(({row:a})=>[W(Y(("dateFormat"in n?n.dateFormat:b(K))(a.createdAt)),1)]),"updatedAt-data":C(({row:a})=>[W(Y(("dateFormat"in n?n.dateFormat:b(K))(a.updatedAt)),1)]),"actions-data":C(({row:a})=>[P(o,{items:v(a)},{default:C(()=>[P(k,{color:"gray",variant:"ghost",icon:"i-heroicons-ellipsis-horizontal-20-solid"})]),_:2},1032,["items"])]),"empty-state":C(()=>[$("div",ce,[fe,P(k,{label:"Kategoriya Qo'shish",onClick:l[0]||(l[0]=a=>R(y)?y.value=!0:y=!0)})])]),_:1},8,["loading","loading-state","rows"]),$("div",pe,[P(O,{modelValue:b(i),"onUpdate:modelValue":l[1]||(l[1]=a=>R(i)?i.value=a:i=a),"page-count":b(d),total:b(h).length},null,8,["modelValue","page-count","total"])])])}}};export{ye as default};

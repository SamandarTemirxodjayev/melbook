import{_ as K,D as Y,G as N,l as X,a4 as D,K as J,L as R,g as V,o as k,c as q,W as O,T as w,V as _,X as S,F as Z,Z as H,ah as x,a1 as ee,r as F,m as te,v as ae,a2 as G,a as B,b as s,w as c,a3 as U,h as i,d as T,t as Q}from"./6MvdGIUj.js";import{q as oe,_ as le,r as se,v as ne,x as ie}from"./DBpAgGOk.js";import{B as $,b as re,_ as ue,c as de}from"./CKa3YBXY.js";import{d as W}from"./yughPfh0.js";import"./DXAgjXKp.js";const ce={wrapper:"flex items-center -space-x-px",base:"",rounded:"first:rounded-s-md last:rounded-e-md",default:{size:"sm",activeButton:{color:"primary"},inactiveButton:{color:"white"},firstButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-double-left-20-solid"},lastButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-double-right-20-solid"},prevButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-right-20-solid"}}},b=Y(N.ui.strategy,N.ui.pagination,ce),me=Y(N.ui.strategy,N.ui.button,x),pe=X({components:{UButton:D},inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},pageCount:{type:Number,default:10},total:{type:Number,required:!0},max:{type:Number,default:7,validate(e){return e>=5&&e<Number.MAX_VALUE}},disabled:{type:Boolean,default:!1},size:{type:String,default:()=>b.default.size,validator(e){return Object.keys(me.size).includes(e)}},activeButton:{type:Object,default:()=>b.default.activeButton},inactiveButton:{type:Object,default:()=>b.default.inactiveButton},showFirst:{type:Boolean,default:!1},showLast:{type:Boolean,default:!1},firstButton:{type:Object,default:()=>b.default.firstButton},lastButton:{type:Object,default:()=>b.default.lastButton},prevButton:{type:Object,default:()=>b.default.prevButton},nextButton:{type:Object,default:()=>b.default.nextButton},divider:{type:String,default:"â€¦"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:C}){const{ui:y,attrs:n}=J("pagination",R(e,"ui"),b,R(e,"class")),r=V({get(){return e.modelValue},set(t){C("update:modelValue",t)}}),u=V(()=>Array.from({length:Math.ceil(e.total/e.pageCount)},(t,d)=>d+1)),m=V(()=>{const t=u.value.length,d=r.value,j=Math.max(e.max,5),g=Math.floor((Math.min(j,t)-5)/2),P=d-g,h=d+g,v=P-1>1,A=h+1<t,o=[];if(t<=j){for(let f=1;f<=t;f++)o.push(f);return o}if(o.push(1),v&&o.push(e.divider),!A){const f=d+g+2-t;for(let a=d-g-f;a<=d-g-1;a++)o.push(a)}for(let f=Math.max(2,P);f<=Math.min(t,h);f++)o.push(f);if(!v){const f=1-(d-g-2);for(let a=d+g+1;a<=d+g+f;a++)o.push(a)}return A&&o.push(e.divider),h<t&&o.push(t),o.length>=3&&o[1]===e.divider&&o[2]===3&&(o[1]=2),o.length>=3&&o[o.length-2]===e.divider&&o[o.length-1]===o.length&&(o[o.length-2]=o.length-1),o}),p=V(()=>r.value>1),z=V(()=>r.value<u.value.length);function L(){p.value&&(r.value=1)}function I(){z.value&&(r.value=u.value.length)}function M(t){typeof t!="string"&&(r.value=t)}function E(){p.value&&r.value--}function l(){z.value&&r.value++}return{ui:y,attrs:n,currentPage:r,pages:u,displayedPages:m,canGoLastOrNext:z,canGoFirstOrPrev:p,onClickPrev:E,onClickNext:l,onClickPage:M,onClickFirst:L,onClickLast:I}}});function fe(e,C,y,n,r,u){const m=D;return k(),q("div",_({class:e.ui.wrapper},e.attrs),[O(e.$slots,"first",{onClick:e.onClickFirst},()=>[e.firstButton&&e.showFirst?(k(),w(m,_({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.firstButton||{},...e.firstButton},{ui:{rounded:""},"aria-label":"First",onClick:e.onClickFirst}),null,16,["size","disabled","class","onClick"])):S("",!0)]),O(e.$slots,"prev",{onClick:e.onClickPrev},()=>[e.prevButton?(k(),w(m,_({key:0,size:e.size,disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.prevButton||{},...e.prevButton},{ui:{rounded:""},"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["size","disabled","class","onClick"])):S("",!0)]),(k(!0),q(Z,null,H(e.displayedPages,(p,z)=>(k(),w(m,_({key:`${p}-${z}`,size:e.size,disabled:e.disabled,label:`${p}`},p===e.currentPage?{...e.ui.default.activeButton||{},...e.activeButton}:{...e.ui.default.inactiveButton||{},...e.inactiveButton},{class:[{"pointer-events-none":typeof p=="string","z-[1]":p===e.currentPage},e.ui.base,e.ui.rounded],ui:{rounded:""},onClick:()=>e.onClickPage(p)}),null,16,["size","disabled","label","class","onClick"]))),128)),O(e.$slots,"next",{onClick:e.onClickNext},()=>[e.nextButton?(k(),w(m,_({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.nextButton||{},...e.nextButton},{ui:{rounded:""},"aria-label":"Next",onClick:e.onClickNext}),null,16,["size","disabled","class","onClick"])):S("",!0)]),O(e.$slots,"last",{onClick:e.onClickLast},()=>[e.lastButton&&e.showLast?(k(),w(m,_({key:0,size:e.size,disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.lastButton||{},...e.lastButton},{ui:{rounded:""},"aria-label":"Last",onClick:e.onClickLast}),null,16,["size","disabled","class","onClick"])):S("",!0)])],16)}const ge=K(pe,[["render",fe]]),he=B("div",{class:"text-2xl font-bold"},"Foydalanuvchilar",-1),ve={class:"flex p-4 justify-end"},ye=["src"],be={class:"flex flex-col items-center justify-center py-6 gap-3"},ke=B("span",{class:"italic text-sm"},"Ma'lumot Mavjud Emas",-1),Be={class:"flex justify-end px-3 py-3.5 border-t border-gray-200 dark:border-gray-700"},Ce={class:"flex items-center justify-between"},ze=B("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Audio Qo'shish ",-1),$e={__name:"index",setup(e){const C=ee();let y=F([]),n=F(!1),r=F(!0),u=te({username:"",name:"",surname:"",phone_number:"",password:""}),m=F(1),p=F(20);ae(async()=>{try{const l=await $fetch($+"/user/get-all",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});y.value=l.data,r.value=!1}catch(l){l.response&&l.response.status===401&&(localStorage.removeItem("token"),G("/exit"))}});const z=[{key:"username",label:"Username"},{key:"name",label:"Ismi"},{key:"surname",label:"Familiyasi"},{key:"phone_number",label:"Telefon Raqami"},{key:"createdAt",label:"Yaratilgan vaqti"},{key:"updatedAt",label:"Yangilangan vaqti"},{key:"actions",label:"Action"}],L=l=>[[{label:"O'chirish",icon:"i-heroicons-trash-20-solid",click:()=>I(l._id)}]],I=async l=>{r.value=!0;try{const t=await $fetch($+"/user/"+l,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(t.status===200){C.add({title:t.message});const d=await $fetch($+"/user/get-all",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});y.value=d.data}else C.add({title:t.message})}catch(t){t.response&&t.response.status===401&&(localStorage.removeItem("token"),G("/exit"))}r.value=!1},M=async()=>{r.value=!0;try{console.log(u);const l=await $fetch($+"/user/register/by-admin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(u)});if(l.status===200){C.add({title:l.message});const t=await $fetch($+"/user/get-all",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});n.value=!1,y.value=t.data}else C.add({title:l.message})}catch(l){l.response&&l.response.status===401&&(localStorage.removeItem("token"),G("/exit"))}r.value=!1},E=V(()=>y.value.slice((m.value-1)*p.value,m.value*p.value));return oe({escape:{usingInput:!0,whenever:[n],handler:()=>{n.value=!1}}}),(l,t)=>{const d=D,j=ne,g=le,P=ge,h=re,v=ue,A=de,o=ie,f=se;return k(),q("div",null,[he,B("div",ve,[s(d,{onClick:t[0]||(t[0]=a=>U(n)?n.value=!0:n=!0)},{default:c(()=>[T(" Foydalanuvchi Qo'shish ")]),_:1})]),s(g,{loading:i(r),"loading-state":{icon:"i-heroicons-arrow-path-20-solid",label:"Yuklanmoqda..."},progress:{color:"primary",animation:"carousel"},columns:z,rows:i(E),"empty-state":{icon:"i-heroicons-circle-stack-20-solid",label:"Bannerlar Mavjud Emas"}},{"photo_url-data":c(({row:a})=>[B("img",{src:a.photo_url,alt:""},null,8,ye)]),"createdAt-data":c(({row:a})=>[T(Q(("dateFormat"in l?l.dateFormat:i(W))(a.createdAt)),1)]),"updatedAt-data":c(({row:a})=>[T(Q(("dateFormat"in l?l.dateFormat:i(W))(a.updatedAt)),1)]),"actions-data":c(({row:a})=>[s(j,{items:L(a)},{default:c(()=>[s(d,{color:"gray",variant:"ghost",icon:"i-heroicons-ellipsis-horizontal-20-solid"})]),_:2},1032,["items"])]),"empty-state":c(()=>[B("div",be,[ke,s(d,{label:"Kategoriya Qo'shish",onClick:t[1]||(t[1]=a=>U(n)?n.value=!0:n=!0)})])]),_:1},8,["loading","loading-state","rows"]),B("div",Be,[s(P,{modelValue:i(m),"onUpdate:modelValue":t[2]||(t[2]=a=>U(m)?m.value=a:m=a),"page-count":i(p),total:i(y).length},null,8,["modelValue","page-count","total"])]),s(f,{modelValue:i(n),"onUpdate:modelValue":t[9]||(t[9]=a=>U(n)?n.value=a:n=a),"prevent-close":""},{default:c(()=>[s(o,{ui:{ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:c(()=>[B("div",Ce,[ze,s(d,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:t[3]||(t[3]=a=>U(n)?n.value=!1:n=!1)})])]),default:c(()=>[s(A,{onSubmit:M},{default:c(()=>[s(v,{class:"my-[2%]",label:"Foydalanuvchi Logini",size:"lg"},{default:c(()=>[s(h,{type:"text",size:"lg",modelValue:i(u).username,"onUpdate:modelValue":t[4]||(t[4]=a=>i(u).username=a)},null,8,["modelValue"])]),_:1}),s(v,{class:"my-[2%]",label:"Foydalanuvchi Ismi",size:"lg"},{default:c(()=>[s(h,{type:"text",size:"lg",modelValue:i(u).name,"onUpdate:modelValue":t[5]||(t[5]=a=>i(u).name=a)},null,8,["modelValue"])]),_:1}),s(v,{class:"my-[2%]",label:"Foydalanuvchi Familiyasi",size:"lg"},{default:c(()=>[s(h,{type:"text",size:"lg",modelValue:i(u).surname,"onUpdate:modelValue":t[6]||(t[6]=a=>i(u).surname=a)},null,8,["modelValue"])]),_:1}),s(v,{class:"my-[2%]",label:"Foydalanuvchi Telefon raqami",size:"lg"},{default:c(()=>[s(h,{type:"text",size:"lg",modelValue:i(u).phone_number,"onUpdate:modelValue":t[7]||(t[7]=a=>i(u).phone_number=a)},null,8,["modelValue"])]),_:1}),s(v,{class:"my-[2%]",label:"Foydalanuvchi Paroli",size:"lg"},{default:c(()=>[s(h,{type:"text",size:"lg",modelValue:i(u).password,"onUpdate:modelValue":t[8]||(t[8]=a=>i(u).password=a)},null,8,["modelValue"])]),_:1}),s(v,{class:"my-[2%]",name:"submit",size:"xl"},{default:c(()=>[s(d,{loading:i(r),type:"submit",color:"primary",size:"xl",block:""},{default:c(()=>[T("Tasdiqlash")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{$e as default};
